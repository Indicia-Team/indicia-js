{"version":3,"file":"indicia.min.js","sources":["../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/asyncToGenerator.js","../src/constants.js","../node_modules/@babel/runtime/helpers/typeof.js","../src/helpers.js","../src/Media.js","../src/Occurrence.js","../src/Sample.js","../src/index.js"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","/* eslint-disable */\nexport const API_BASE = 'api/',\n  API_VER = 'v1',\n  API_SAMPLES_PATH = '/samples';\n","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","/** *********************************************************************\n * HELPER FUNCTIONS\n ********************************************************************* */\n\nexport async function makeRequest(url, options, timeout = 80000) {\n  const timeoutTrigger = new Promise((_, reject) =>\n    setTimeout(() => reject(new Error('timeout')), timeout)\n  );\n\n  const res = await Promise.race([fetch(url, options), timeoutTrigger]);\n  const resJSON = (await res.json()) || {};\n  if (!res.ok) {\n    const error = new Error(res.statusText);\n    error.status = res.status;\n\n    if (!resJSON.errors) {\n      error.errors = resJSON.errors;\n    }\n    throw error;\n  }\n\n  return resJSON;\n}\n\n/**\n * Generate UUID.\n */\n/* eslint-disable no-bitwise */\nexport function getNewUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n\n    return v.toString(16);\n  });\n}\n/* eslint-enable no-bitwise */\n\n/**\n * Converts DataURI object to a Blob.\n *\n * @param {type} dataURI\n * @param {type} fileType\n * @returns {undefined}\n */\nexport function dataURItoBlob(dataURI, fileType) {\n  const binary = atob(dataURI.split(',')[1]);\n  const array = [];\n  for (let i = 0; i < binary.length; i++) {\n    array.push(binary.charCodeAt(i));\n  }\n  return new Blob([new Uint8Array(array)], {\n    type: fileType,\n  });\n}\n\n// Detecting data URLs\n// https://gist.github.com/bgrins/6194623\n\n// data URI - MDN https://developer.mozilla.org/en-US/docs/data_URIs\n// The 'data' URL scheme: http://tools.ietf.org/html/rfc2397\n// Valid URL Characters: http://tools.ietf.org/html/rfc2396#section2\nexport function isDataURL(string) {\n  if (!string) {\n    return false;\n  }\n  const normalized = string.toString(); // numbers\n\n  /* eslint-disable no-useless-escape, max-len */\n  const regex = /^\\s*data:([a-z]+\\/[a-z]+(;[a-z\\-]+\\=[a-z\\-]+)?)?(;base64)?,[a-z0-9\\!\\$\\&\\'\\,\\(\\)\\*\\+\\,\\;\\=\\-\\.\\_\\~\\:\\@\\/\\?\\%\\s]*\\s*$/i;\n  return !!normalized.match(regex);\n}\n/* eslint-enable no-useless-escape, max-len  */\n\n// From jQuery 1.4.4 .\n/* eslint-disable */\nexport function isPlainObject(obj) {\n  function type(obj) {\n    const class2type = {};\n    const types = 'Boolean Number String Function Array Date RegExp Object'.split(\n      ' '\n    );\n    for (let i = 0; i < types.length; i++) {\n      class2type[`[object ${types[i]}]`] = types[i].toLowerCase();\n    }\n    return obj == null\n      ? String(obj)\n      : class2type[toString.call(obj)] || 'object';\n  }\n\n  function isWindow(obj) {\n    return obj && typeof obj === 'object' && 'setInterval' in obj;\n  }\n\n  // Must be an Object.\n  // Because of IE, we also have to check the presence of the constructor property.\n  // Make sure that DOM nodes and window objects don't pass through, as well\n  if (!obj || type(obj) !== 'object' || obj.nodeType || isWindow(obj)) {\n    return false;\n  }\n\n  // Not own constructor property must be Object\n  if (\n    obj.constructor &&\n    !hasOwn.call(obj, 'constructor') &&\n    !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')\n  ) {\n    return false;\n  }\n\n  // Own properties are enumerated firstly, so to speed up,\n  // if last one is own, then all properties are own.\n\n  let key;\n  for (key in obj) {\n  }\n\n  return key === undefined || hasOwn.call(obj, key);\n}\n\n// checks if the object has any elements.\nexport function isEmptyObject(obj) {\n  for (const key in obj) {\n    return false;\n  }\n  return true;\n}\n/* eslint-enable */\n\n/**\n * Formats the date to Indicia Warehouse format.\n * @param date String or Date object\n * @returns String formatted date\n */\nexport function formatDate(dateToFormat) {\n  let date = dateToFormat;\n  let now = new Date();\n  let day = 0;\n  let month = 0;\n  const reg = /\\d{2}\\/\\d{2}\\/\\d{4}$/;\n  const regDash = /\\d{4}-\\d{1,2}-\\d{1,2}$/;\n  const regDashInv = /\\d{1,2}-\\d{1,2}-\\d{4}$/;\n  let dateArray = [];\n\n  if (typeof date === 'string') {\n    dateArray = date.split('-');\n    // check if valid\n    if (reg.test(date)) {\n      return date;\n      // dashed\n    }\n    if (regDash.test(date)) {\n      date = new Date(\n        window.parseInt(dateArray[0]),\n        window.parseInt(dateArray[1]) - 1,\n        window.parseInt(dateArray[2])\n      );\n      // inversed dashed\n    } else if (regDashInv.test(date)) {\n      date = new Date(\n        window.parseInt(dateArray[2]),\n        window.parseInt(dateArray[1]) - 1,\n        window.parseInt(dateArray[0])\n      );\n    }\n  }\n\n  now = date || now;\n  day = `0${now.getDate()}`.slice(-2);\n  month = `0${now.getMonth() + 1}`.slice(-2);\n\n  return `${day}/${month}/${now.getFullYear()}`;\n}\n\nexport function getBlobFromURL(url, mediaType) {\n  if (isDataURL(url)) {\n    const blob = dataURItoBlob(url, mediaType);\n    return Promise.resolve(blob);\n  }\n\n  return new Promise(resolve => {\n    // load image\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'blob';\n    xhr.onload = () => {\n      const blob = xhr.response;\n      resolve(blob);\n    };\n    // todo check error case\n\n    xhr.send();\n  });\n}\n","/** *********************************************************************\n * IMAGE\n ********************************************************************* */\n\nimport { getNewUUID } from './helpers';\n\nconst THUMBNAIL_WIDTH = 100; // px\nconst THUMBNAIL_HEIGHT = 100; // px\n\nexport default class Media {\n  cid = getNewUUID();\n\n  id = null;\n\n  attrs = {};\n\n  metadata = {\n    created_on: new Date(),\n  };\n\n  keys = {};\n\n  constructor(options = {}) {\n    this.id = options.id; // remote ID\n    this.cid = options.cid || this.cid;\n\n    this.attrs = {\n      ...this.attrs,\n      ...options.attrs,\n      ...options.attributes, // backwards compatible\n    };\n    this.metadata = { ...this.metadata, ...options.metadata };\n  }\n\n  /**\n   * Transforms and resizes an image file into a string.\n   * Can accept file image path and a file input file.\n   *\n   * @param onError\n   * @param file\n   * @param onSaveSuccess\n   * @returns {number}\n   */\n  static getDataURI(file, options = {}) {\n    const promise = new Promise((fulfill, reject) => {\n      // file paths\n      if (typeof file === 'string') {\n        // get extension\n        let fileType = file.replace(/.*\\.([a-z]+)$/i, '$1');\n        if (fileType === 'jpg') fileType = 'jpeg'; // to match media types image/jpeg\n\n        Media.resize(file, fileType, options.width, options.height).then(\n          args => {\n            const [image, dataURI] = args;\n            fulfill([dataURI, fileType, image.width, image.height]);\n          }\n        );\n        return;\n      }\n\n      // file inputs\n      if (!window.FileReader) {\n        reject(new Error('No File Reader'));\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onload = function(event) {\n        if (options.width || options.height) {\n          // resize\n          Media.resize(\n            event.target.result,\n            file.type,\n            options.width,\n            options.height\n          ).then(args => {\n            const [image, dataURI] = args;\n            fulfill([dataURI, file.type, image.width, image.height]);\n          });\n        } else {\n          const image = new window.Image(); // native one\n\n          image.onload = () => {\n            const type = file.type.replace(/.*\\/([a-z]+)$/i, '$1');\n            fulfill([event.target.result, type, image.width, image.height]);\n          };\n          image.src = event.target.result;\n        }\n      };\n      reader.readAsDataURL(file);\n    });\n\n    return promise;\n  }\n\n  /**\n   * http://stackoverflow.com/questions/2516117/how-to-scale-an-image-in-data-uri-format-in-javascript-real-scaling-not-usin\n   * @param data\n   * @param fileType\n   * @param MAX_WIDTH\n   * @param MAX_HEIGHT\n   */\n  static resize(data, fileType, MAX_WIDTH, MAX_HEIGHT) {\n    const promise = new Promise(fulfill => {\n      const image = new window.Image(); // native one\n\n      image.onload = () => {\n        let { width } = image;\n        let { height } = image;\n        const maxWidth = MAX_WIDTH || width;\n        const maxHeight = MAX_HEIGHT || height;\n\n        let res = null;\n\n        // resizing\n        if (width > height) {\n          res = width / maxWidth;\n        } else {\n          res = height / maxHeight;\n        }\n\n        width /= res;\n        height /= res;\n\n        // Create a canvas with the desired dimensions\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n\n        // Scale and draw the source image to the canvas\n        canvas.getContext('2d').drawImage(image, 0, 0, width, height);\n\n        // Convert the canvas to a data URL in some format\n        fulfill([image, canvas.toDataURL(fileType)]);\n      };\n\n      image.src = data;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Returns image's absolute URL or dataURI.\n   */\n  getURL() {\n    return this.attrs.data;\n  }\n\n  /**\n   * Resizes itself.\n   */\n  resize(MAX_WIDTH, MAX_HEIGHT) {\n    const that = this;\n    const promise = new Promise((fulfill, reject) => {\n      Media.resize(this.getURL(), this.attrs.type, MAX_WIDTH, MAX_HEIGHT)\n        .then(args => {\n          const [image, data] = args;\n          that.attrs.data = data;\n          fulfill([image, data]);\n        })\n        .catch(reject);\n    });\n    return promise;\n  }\n\n  /**\n   * Adds a thumbnail to image model.\n   * @param options\n   */\n  addThumbnail(options = {}) {\n    const that = this;\n\n    const promise = new Promise((fulfill, reject) => {\n      // check if data source is dataURI\n      const re = /^data:/i;\n      if (re.test(this.getURL())) {\n        Media.resize(\n          this.getURL(),\n          this.attrs.type,\n          THUMBNAIL_WIDTH || options.width,\n          THUMBNAIL_WIDTH || options.width\n        )\n          .then(args => {\n            const [, data] = args;\n            that.attrs.thumbnail = data;\n            fulfill();\n          })\n          .catch(reject);\n        return;\n      }\n\n      Media.getDataURI(this.getURL(), {\n        width: THUMBNAIL_WIDTH || options.width,\n        height: THUMBNAIL_HEIGHT || options.height,\n      })\n        .then(data => {\n          [that.attrs.thumbnail] = data;\n          fulfill();\n        })\n        .catch(reject);\n    });\n\n    return promise;\n  }\n\n  toJSON() {\n    const data = {\n      id: this.id,\n      cid: this.cid,\n      metadata: this.metadata,\n      attrs: this.attrs,\n    };\n    return data;\n  }\n\n  static fromJSON(json) {\n    return new this(json);\n  }\n\n  /**\n   * Returns an object with attributes and their values\n   * mapped for warehouse submission.\n   *\n   * @returns {*}\n   */\n  getSubmission() {\n    const submission = {\n      id: this.id,\n      name: this.cid,\n    };\n\n    return [submission];\n  }\n}\n","/** *********************************************************************\n * OCCURRENCE\n ********************************************************************* */\nimport { getNewUUID } from './helpers';\nimport DefaultMedia from './Media';\n\nfunction defaultMetadata() {\n  const today = new Date();\n  return {\n    training: null,\n\n    created_on: today,\n    updated_on: today,\n\n    synced_on: null, // set when fully initialized only\n    server_on: null, // updated on server\n  };\n}\n\nexport default class Occurrence {\n  /**\n   * Warehouse attributes and their values.\n   */\n  static keys = {\n    taxon: {\n      id: 'taxa_taxon_list_id',\n    },\n    comment: { id: 'comment' },\n  };\n\n  cid = getNewUUID();\n\n  id = null;\n\n  attrs = {};\n\n  metadata = defaultMetadata();\n\n  media = [];\n\n  keys = Occurrence.keys;\n\n  constructor(options = {}) {\n    this.id = options.id; // remote ID\n    this.cid = options.cid || this.cid;\n\n    this.attrs = {\n      ...this.attrs,\n      ...options.attrs,\n      ...options.attributes, // backwards compatible\n    };\n    this.metadata = { ...this.metadata, ...options.metadata };\n  }\n\n  toJSON() {\n    let media;\n    if (!this.media) {\n      media = [];\n      console.warn('toJSON media missing');\n    } else {\n      media = this.media.map(m => m.toJSON());\n    }\n    const data = {\n      id: this.id,\n      cid: this.cid,\n      metadata: this.metadata,\n      attrs: this.attrs,\n      media,\n    };\n    return data;\n  }\n\n  static fromJSON(json, Media = DefaultMedia) {\n    const { media, ...options } = json;\n    const occurrence = new this(options);\n    media.forEach(m => occurrence.media.push(Media.fromJSON(m)));\n    return occurrence;\n  }\n\n  /**\n   * Returns an object with attributes and their values\n   * mapped for warehouse submission.\n   */\n  getSubmission(options = {}) {\n    const that = this;\n    const occKeys = typeof this.keys === 'function' ? this.keys() : this.keys;\n    const keys = { ...Occurrence.keys, ...occKeys }; // warehouse keys/values to transform\n    const media = [...this.media]; // all media within this and child models\n\n    const submission = {\n      id: this.id,\n      external_key: this.cid,\n      fields: {},\n      media: [],\n    };\n\n    if (this.metadata.training || options.training) {\n      submission.training = this.metadata.training || options.training;\n    }\n\n    if (this.metadata.release_status || options.release_status) {\n      submission.release_status =\n        this.metadata.release_status || options.release_status;\n    }\n\n    if (this.metadata.record_status || options.record_status) {\n      submission.record_status =\n        this.metadata.record_status || options.record_status;\n    }\n\n    if (this.metadata.sensitive || options.sensitive) {\n      submission.sensitive = this.metadata.sensitive || options.sensitive;\n    }\n\n    if (this.metadata.confidential || options.confidential) {\n      submission.confidential =\n        this.metadata.confidential || options.confidential;\n    }\n\n    if (this.metadata.sensitivity_precision || options.sensitivity_precision) {\n      submission.sensitivity_precision =\n        this.metadata.sensitivity_precision || options.sensitivity_precision;\n    }\n\n    // transform attributes\n    Object.keys(this.attrs).forEach(attr => {\n      // no need to send attributes with no values\n      let value = that.attrs[attr];\n      if (!value) return;\n\n      if (!keys[attr]) {\n        if (attr !== 'email') {\n          console.warn(`Indicia: no such key: ${attr}`);\n        }\n        submission.fields[attr] = value;\n        return;\n      }\n\n      const warehouseAttr = keys[attr].id || attr;\n\n      // check if has values to choose from\n      if (keys[attr].values) {\n        if (typeof keys[attr].values === 'function') {\n          // get a value from a function\n          value = keys[attr].values(value, submission, that);\n        } else if (value instanceof Array) {\n          // the attribute has multiple values\n          value = value.map(v => keys[attr].values[v]);\n        } else {\n          value = keys[attr].values[value];\n        }\n      }\n\n      // don't need to send null or undefined\n      if (value) {\n        submission.fields[warehouseAttr] = value;\n      }\n    });\n\n    // transform sub models\n    // media does not return any media-models only JSON data about them\n    // media files will be attached separately\n    const mediaSubmission = [];\n    this.media.forEach(model => {\n      const [modelSubmission] = model.getSubmission();\n      mediaSubmission.push(modelSubmission);\n    });\n    submission.media = mediaSubmission;\n\n    return [submission, media];\n  }\n}\n","/** *********************************************************************\n * SAMPLE\n *\n * Refers to the event in which the sightings were observed, in other\n * words it describes the place, date, people, environmental conditions etc.\n * Within a sample, you can have zero or more occurrences which refer to each\n * species sighted as part of the sample.\n ********************************************************************* */\nimport { API_BASE, API_VER, API_SAMPLES_PATH } from './constants';\nimport { makeRequest, getBlobFromURL, getNewUUID } from './helpers';\nimport DefaultMedia from './Media';\nimport DefaultOccurrence from './Occurrence';\n\nfunction defaultMetadata() {\n  const today = new Date();\n  return {\n    survey_id: null,\n    input_form: null,\n\n    created_on: today,\n    updated_on: today,\n\n    synced_on: null, // set when fully initialized only\n    server_on: null, // updated on server\n  };\n}\n\nfunction handleDuplicates(errors) {\n  // duplicate occurred - this fixes only occurrence duplicates!\n  // todo: remove once this is sorted\n  const res = {\n    data: {\n      id: null,\n      external_key: null,\n      occurrences: [],\n    },\n  };\n\n  errors.forEach(error => {\n    res.data.id = error.sample_id;\n    res.data.external_key = error.sample_external_key;\n    res.data.occurrences.push({\n      id: error.id,\n      external_key: error.external_key,\n    });\n  });\n\n  return res;\n}\n\nasync function appendModelToFormData(mediaModel, formData) {\n  // can provide both image/jpeg and jpeg\n  const { type } = mediaModel.attrs;\n  let extension = type;\n  let mediaType = type;\n  if (type.match(/image.*/)) {\n    [, extension] = type.split('/');\n  } else {\n    mediaType = `image/${mediaType}`;\n  }\n\n  const url = mediaModel.getURL();\n  const blob = await getBlobFromURL(url, mediaType);\n\n  const name = mediaModel.cid;\n  formData.append(name, blob, `${name}.${extension}`);\n}\n\nfunction setNewRemoteID(model, remoteIDs) {\n  // set new remote ID\n  const remoteID = remoteIDs[model.cid];\n  if (remoteID) {\n    model.id = remoteID;\n  }\n\n  // do that for all submodels\n  if (model.samples) {\n    model.samples.forEach(subModel => setNewRemoteID(subModel, remoteIDs));\n  }\n  if (model.occurrences) {\n    model.occurrences.forEach(subModel => setNewRemoteID(subModel, remoteIDs));\n  }\n  if (model.media) {\n    model.media.forEach(subModel => setNewRemoteID(subModel, remoteIDs));\n  }\n}\n\n/**\n * Creates a stringified JSON representation of the model or a FormData object.\n * If the media is present then it creates a FormData so that the record\n * could be submitted in one call.\n */\nasync function normaliseModelData(data, media) {\n  const dataStr = JSON.stringify({ data });\n\n  if (!media.length) {\n    return dataStr;\n  }\n\n  const formData = new FormData(); // for submission\n  formData.append('submission', dataStr);\n\n  const mediaProcesses = media.map(m => appendModelToFormData(m, formData));\n  await Promise.all(mediaProcesses);\n\n  return formData;\n}\n\nfunction remoteCreateParse(model, responseData) {\n  // get new ids\n  const remoteIDs = {};\n\n  // recursively extracts ids from collection of response models\n  function getIDs(data) {\n    remoteIDs[data.external_key] = data.id;\n    if (data.samples) {\n      data.samples.forEach(subModel => getIDs(subModel));\n    }\n    if (data.occurrences) {\n      data.occurrences.forEach(subModel => getIDs(subModel));\n    }\n    // Images don't store external_keys yet.\n    // if (data.media) data.media.forEach(subModel => getIDs(subModel));\n  }\n\n  getIDs(responseData);\n\n  setNewRemoteID(model, remoteIDs);\n}\n\nfunction getUserAuth(remote) {\n  if (!remote.user || !remote.password) {\n    return null;\n  }\n\n  const user = typeof remote.user === 'function' ? remote.user() : remote.user;\n  const password =\n    typeof remote.password === 'function' ? remote.password() : remote.password;\n  const basicAuth = btoa(`${user}:${password}`);\n\n  return `Basic  ${basicAuth}`;\n}\n\nexport default class Sample {\n  /**\n   * Warehouse attributes and their values.\n   */\n  static keys = {\n    date: { id: 'date' },\n    sample_method_id: { id: 'sample_method_id' },\n    location: { id: 'entered_sref' },\n    location_type: {\n      id: 'entered_sref_system',\n      values: {\n        british: 'OSGB', // for British National Grid\n        irish: 'OSIE', // for Irish Grid\n        channel: 'utm30ed50', // for Channel Islands Grid\n        latlon: 4326, // for Latitude and Longitude in decimal form (WGS84 datum)\n      },\n    },\n    form: { id: 'input_form' },\n    group: { id: 'group_id' },\n    comment: { id: 'comment' },\n  };\n\n  static fromJSON(\n    json,\n    Occurrence = DefaultOccurrence,\n    Sample = this, // eslint-disable-line\n    Media = DefaultMedia\n  ) {\n    const { samples, occurrences, media, ...options } = json;\n    const sample = new this(options);\n    samples.forEach(smp => sample.samples.push(Sample.fromJSON(smp)));\n    occurrences.forEach(occ =>\n      sample.occurrences.push(Occurrence.fromJSON(occ))\n    );\n    media.forEach(m => sample.media.push(Media.fromJSON(m)));\n    return sample;\n  }\n\n  cid = getNewUUID();\n\n  id = null;\n\n  attrs = {\n    date: new Date(),\n    location_type: 'latlon',\n  };\n\n  metadata = defaultMetadata();\n\n  media = [];\n\n  occurrences = [];\n\n  samples = [];\n\n  keys = Sample.keys;\n\n  remote = {\n    host_url: null, // must be set up for remote sync\n    api_key: null, // must be set up for remote sync\n    timeout: 30000, // 30s\n\n    user: null, // must be set up for remote sync\n    password: null, // must be set up for remote sync\n\n    synchronising: false,\n  };\n\n  constructor(options = {}) {\n    this.id = options.id; // remote ID\n    this.cid = options.cid || getNewUUID();\n\n    this.attrs = {\n      ...this.attrs,\n      ...options.attrs,\n      ...options.attributes, // backwards compatible\n    };\n    this.metadata = { ...this.metadata, ...options.metadata };\n  }\n\n  toJSON() {\n    let occurrences;\n    if (!this.occurrences) {\n      occurrences = [];\n      console.warn('toJSON occurrences missing');\n    } else {\n      occurrences = this.occurrences.map(model => model.toJSON());\n    }\n\n    let samples;\n    if (!this.samples) {\n      samples = [];\n      console.warn('toJSON samples missing');\n    } else {\n      samples = this.samples.map(model => model.toJSON());\n    }\n\n    let media;\n    if (!this.media) {\n      media = [];\n      console.warn('toJSON media missing');\n    } else {\n      media = this.media.map(model => model.toJSON());\n    }\n\n    const data = {\n      id: this.id,\n      cid: this.cid,\n      metadata: this.metadata,\n      attrs: this.attrs,\n      occurrences,\n      samples,\n      media,\n    };\n\n    return data;\n  }\n\n  async saveRemote() {\n    // Ensure that we have a URL.\n    if (!this.remote.host_url || !this.remote.api_key) {\n      return Promise.reject(\n        new Error('A \"remote\" property is not configured.')\n      );\n    }\n\n    try {\n      this.remote.synchronising = true;\n\n      // get submission model and all the media\n      const [submission, media] = this.getSubmission();\n      submission.type = 'samples';\n\n      const data = await normaliseModelData(submission, media);\n\n      const resp = await this._createRemote(data);\n      this.remote.synchronising = false;\n\n      // update the model and occurrences with new remote IDs\n      remoteCreateParse(this, resp.data);\n\n      // update metadata\n      const timeNow = new Date();\n      this.metadata.server_on = timeNow;\n      this.metadata.updated_on = timeNow;\n      this.metadata.synced_on = timeNow;\n\n      return this;\n    } catch (err) {\n      this.remote.synchronising = false;\n      throw err;\n    }\n  }\n\n  getSubmission(options = {}) {\n    const that = this;\n    const sampleKeys =\n      typeof this.keys === 'function' ? this.keys() : this.keys;\n    const keys = { ...Sample.keys, ...sampleKeys }; // warehouse keys/values to transform\n    let media = [...this.media]; // all media within this and child models\n\n    const submission = {\n      id: this.id,\n      external_key: this.cid,\n      survey_id: this.metadata.survey_id,\n      input_form: this.metadata.input_form,\n      fields: {},\n      media: [],\n    };\n\n    // transform attributes\n    Object.keys(this.attrs).forEach(attr => {\n      // no need to send attributes with no values\n      let value = that.attrs[attr];\n      if (!value) return;\n\n      if (!keys[attr]) {\n        if (attr !== 'email') {\n          console.warn(`Indicia: no such key: ${attr}`);\n        }\n        submission.fields[attr] = value;\n        return;\n      }\n\n      const warehouseAttr = keys[attr].id || attr;\n\n      // check if has values to choose from\n      if (keys[attr].values) {\n        if (typeof keys[attr].values === 'function') {\n          // get a value from a function\n          value = keys[attr].values(value, submission, that);\n        } else if (value instanceof Array) {\n          // the attribute has multiple values\n          value = value.map(v => keys[attr].values[v]);\n        } else {\n          value = keys[attr].values[value];\n        }\n      }\n\n      // don't need to send null or undefined\n      if (value) {\n        submission.fields[warehouseAttr] = value;\n      }\n    });\n\n    const sampleOptions = { ...options };\n    this.metadata.training && (sampleOptions.training = this.metadata.training);\n    this.metadata.release_status &&\n      (sampleOptions.release_status = this.metadata.release_status);\n    this.metadata.record_status &&\n      (sampleOptions.record_status = this.metadata.record_status);\n    this.metadata.sensitive &&\n      (sampleOptions.sensitive = this.metadata.sensitive);\n    this.metadata.confidential &&\n      (sampleOptions.confidential = this.metadata.confidential);\n    this.metadata.sensitivity_precision &&\n      (sampleOptions.sensitivity_precision = this.metadata.sensitivity_precision);\n\n    // transform sub models\n    // occurrences\n\n    const occurrences = [];\n    let occurrencesMedia = [];\n    this.occurrences.forEach(model => {\n      const [modelSubmission, modelMedia] = model.getSubmission(sampleOptions);\n      occurrences.push(modelSubmission);\n      occurrencesMedia = occurrencesMedia.concat(modelMedia);\n    });\n\n    submission.occurrences = occurrences;\n    media = media.concat(occurrencesMedia);\n\n    // samples\n    const samples = [];\n    let samplesMedia = [];\n    this.samples.forEach(model => {\n      const [modelSubmission, modelMedia] = model.getSubmission(sampleOptions);\n      samples.push(modelSubmission);\n      samplesMedia = samplesMedia.concat(modelMedia);\n    });\n\n    submission.samples = samples;\n    media = media.concat(samplesMedia);\n\n    // media - does not return any media-models only JSON data about them\n    const mediaSubmission = [];\n    this.media.forEach(model => {\n      const [modelSubmission] = model.getSubmission();\n      mediaSubmission.push(modelSubmission);\n    });\n\n    submission.media = mediaSubmission;\n\n    return [submission, media];\n  }\n\n  async _createRemote(data) {\n    const url = this.remote.host_url + API_BASE + API_VER + API_SAMPLES_PATH;\n\n    const options = {\n      method: 'POST',\n      headers: {\n        authorization: getUserAuth(this.remote),\n        'x-api-key': this.remote.api_key,\n      },\n      body: data,\n    };\n\n    try {\n      return await makeRequest(url, options);\n    } catch (e) {\n      const { status, errors = [] } = e;\n      if (status === 409) {\n        return handleDuplicates(errors);\n      }\n\n      if (errors) {\n        const message = errors.reduce(\n          (name, err) => `${name}${err.title}\\n`,\n          ''\n        );\n        throw new Error(message);\n      }\n\n      throw e;\n    }\n  }\n}\n","import Sample from './Sample';\nimport Occurrence from './Occurrence';\nimport Media from './Media';\nimport * as CONST from './constants';\n\nconst Indicia = {\n  /* global LIB_VERSION */\n  VERSION: LIB_VERSION, // replaced by build\n\n  Sample,\n  Occurrence,\n  Media,\n\n  ...CONST,\n};\n\nexport { Sample, Occurrence, Media };\nexport default Indicia;\n"],"names":["obj","key","value","Object","defineProperty","enumerable","configurable","writable","arr","Array","isArray","i","arr2","length","iter","Symbol","iterator","prototype","toString","call","from","TypeError","arrayWithoutHoles","iterableToArray","nonIterableSpread","runtime","exports","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","makeInvokeMethod","fn","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","Promise","resolve","reject","invoke","result","__await","then","unwrapped","error","undefined","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","_arr","_n","_d","_e","_s","_i","arrayWithHoles","iterableToArrayLimit","nonIterableRest","source","excluded","target","sourceKeys","indexOf","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","instance","Constructor","_defineProperties","props","descriptor","protoProps","staticProps","asyncGeneratorStep","gen","_next","_throw","args","arguments","apply","_typeof","makeRequest","url","options","timeout","timeoutTrigger","_","setTimeout","race","fetch","res","json","resJSON","ok","statusText","status","errors","getNewUUID","replace","c","r","Math","random","getBlobFromURL","mediaType","string","match","blob","dataURI","fileType","binary","atob","split","array","charCodeAt","Blob","Uint8Array","dataURItoBlob","xhr","XMLHttpRequest","open","responseType","onload","response","send","Media","created_on","Date","id","cid","attrs","attributes","metadata","data","MAX_WIDTH","MAX_HEIGHT","that","fulfill","resize","_this","getURL","image","promise","test","_this2","thumbnail","getDataURI","width","height","file","window","FileReader","reader","event","Image","src","readAsDataURL","canvas","document","createElement","getContext","drawImage","toDataURL","defaultMetadata","today","training","updated_on","synced_on","server_on","Occurrence","media","map","m","toJSON","console","warn","occKeys","submission","external_key","fields","release_status","record_status","sensitive","confidential","sensitivity_precision","attr","warehouseAttr","v","mediaSubmission","model","getSubmission","modelSubmission","DefaultMedia","occurrence","fromJSON","survey_id","input_form","handleDuplicates","occurrences","sample_id","sample_external_key","appendModelToFormData","mediaModel","formData","extension","append","normaliseModelData","dataStr","JSON","stringify","FormData","mediaProcesses","all","remoteCreateParse","responseData","remoteIDs","getIDs","samples","subModel","setNewRemoteID","remoteID","getUserAuth","remote","user","password","basicAuth","btoa","taxon","comment","Sample","date","location_type","host_url","api_key","synchronising","DefaultOccurrence","sample","smp","occ","_createRemote","resp","timeNow","sampleKeys","sampleOptions","occurrencesMedia","modelMedia","concat","samplesMedia","headers","authorization","body","message","reduce","title","sample_method_id","location","british","irish","channel","latlon","form","group","Indicia","VERSION","CONST"],"mappings":"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"}